{
  "comments": [
    {
      "key": {
        "uuid": "fc76c682_b8c69542",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 83,
      "author": {
        "id": 5005
      },
      "writtenOn": "2016-10-14T18:18:53Z",
      "side": 1,
      "message": "this is obscure and needs a comment.\nsince there\u0027s only one call to newState, refactor the whole thing so it\u0027s done there. should be easy.\n\nstate :\u003d newState(strings.ToLower(flag.Arg(0))\nargs :\u003d flag.Args()[1:]",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_f8d00df6",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 277,
      "author": {
        "id": 5005
      },
      "writtenOn": "2016-10-14T18:18:53Z",
      "side": 1,
      "message": "s/force creating/create/\nalso you need a flag to specify where to write the rc file",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c39f6b7_09ad8987",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 277,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T19:03:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc76c682_f8d00df6",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_78bddda9",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 278,
      "author": {
        "id": 5005
      },
      "writtenOn": "2016-10-14T18:18:53Z",
      "side": 1,
      "message": "email_address\nconsistent with other usage messages (see link e.g.)",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c39f6b7_c91d31d5",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 278,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T19:03:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc76c682_78bddda9",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_b81855e6",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 287,
      "author": {
        "id": 5005
      },
      "writtenOn": "2016-10-14T18:18:53Z",
      "side": 1,
      "message": "this isn\u0027t where you use valid. valid is for servers to check that internally all is well.\nhere you call user.Parse to _create_ a valid name from the one provided.",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c39f6b7_e922f511",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 287,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T19:03:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc76c682_b81855e6",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c39f6b7_a901dd6d",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 287,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T19:03:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc76c682_b81855e6",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_782f9df5",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 294,
      "author": {
        "id": 5005
      },
      "writtenOn": "2016-10-14T18:18:53Z",
      "side": 1,
      "message": "look at the other calls to exit and exitf. they don\u0027t look like this.\nalso i don\u0027t believe you should ever tell a user, especially one signing up and therefore new to the system, to remove anything.\n\ns.exitf(\"$HOME/upspin/rc already exists\")\n\nbut this is wrong in general anyway, since the error might be due to environment variables. be explicit and actually guarantee that the environment is clean, the file exists, etc.\nif the -context flag is set, it\u0027s another thing to think about.",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c39f6b7_29c96d1f",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 294,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T19:03:19Z",
      "side": 1,
      "message": "Done. But InitContext verifies Homedir already. Here, I\u0027ll just print what you suggested, but I moved Homedir check above, which is the same function initcontext calls. So, if it fails due to env variables, it will fail earlier and here it will just all work.\n\nI had to fix initcontext.FromFile. But all existing occurrences of it use flags.Context.\n\nDone.",
      "parentUuid": "fc76c682_782f9df5",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_380e0598",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 307,
      "author": {
        "id": 5005
      },
      "writtenOn": "2016-10-14T18:18:53Z",
      "side": 1,
      "message": "this is hard to read. please break it up.",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c39f6b7_e9983525",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 307,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T19:03:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc76c682_380e0598",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_78087d89",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 314,
      "author": {
        "id": 5005
      },
      "writtenOn": "2016-10-14T18:18:53Z",
      "side": 1,
      "message": "explain this better, or for just now just add: TODO: write proper help",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c39f6b7_097e69b2",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 314,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T19:03:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc76c682_78087d89",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc8de6b6_5da73ba7",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 322,
      "author": {
        "id": 5025
      },
      "writtenOn": "2016-10-14T16:21:21Z",
      "side": 1,
      "message": "I had been trying to canonicalize the key before it went into factotum.  Do you have an example showing that TrimSpace is needed here?  It may be a bug elsewhere in my code.",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_155af482",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 322,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T16:47:44Z",
      "side": 1,
      "message": "Your code is not wrong. It\u0027s just that the format of the email looks better with just one space. I can remove this and change the template below to have the Signature on the same line. Then it all works. (That is, this is just cosmetic stuff).",
      "parentUuid": "fc8de6b6_5da73ba7",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_35f2905f",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 322,
      "author": {
        "id": 5025
      },
      "writtenOn": "2016-10-14T16:58:24Z",
      "side": 1,
      "message": "Thanks.  Perfectly ok to have it there if it is just to make the email look nicer.",
      "parentUuid": "fc76c682_155af482",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3c885ea4_5f648b42",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 333,
      "author": {
        "id": 5025
      },
      "writtenOn": "2016-10-14T16:21:21Z",
      "side": 1,
      "message": "The signature is ok for initial testing purposes if you want, but I\u0027d just as soon remove it before we make this permanent.  Unless I\u0027m missing something, this signature doesn\u0027t prove anything, and may confuse the casual reader.  Better for them to ask, \"Hey, how can you do such a security critical function unauthenticated?!\" and then learn about DKIM.",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_75616831",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 333,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T16:47:44Z",
      "side": 1,
      "message": "The only thing this adds is proof that the user had the secret key at some point. I agree it\u0027s not needed, but it\u0027s a little added bonus. \n\nI can remove it in another CL, because now the rest of the code uses it, so it needs to be removed together.",
      "parentUuid": "3c885ea4_5f648b42",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_75ec0881",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 333,
      "author": {
        "id": 5025
      },
      "writtenOn": "2016-10-14T16:58:24Z",
      "side": 1,
      "message": "SGTM",
      "parentUuid": "fc76c682_75616831",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fc76c682_3857e55b",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 339,
      "author": {
        "id": 5005
      },
      "writtenOn": "2016-10-14T18:18:53Z",
      "side": 1,
      "message": "this will make it exit(1). you don\u0027t want that. use Println",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7c39f6b7_89b2599a",
        "filename": "cmd/upspin/main.go",
        "patchSetId": 1
      },
      "lineNbr": 339,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-10-14T19:03:19Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fc76c682_3857e55b",
      "revId": "01624b0d9c0ca96e7f5a38d76cc869f8a4cb3021",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    }
  ]
}