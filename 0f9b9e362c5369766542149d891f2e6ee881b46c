{
  "comments": [
    {
      "key": {
        "uuid": "cbfa12f2_bc2b018d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-09-14T21:20:59Z",
      "side": 1,
      "message": "remove the period at the end",
      "revId": "0f9b9e362c5369766542149d891f2e6ee881b46c",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cb55b2ad_c42ab386",
        "filename": "auth/grpcauth/client.go",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-09-14T19:50:51Z",
      "side": 1,
      "message": "Why not move these 3 lines into dialWithKeepAlive?",
      "revId": "0f9b9e362c5369766542149d891f2e6ee881b46c",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cbfa12f2_5c20fda8",
        "filename": "auth/grpcauth/client.go",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-09-14T21:20:59Z",
      "side": 1,
      "message": "I think because it encloses over ac, and dialWithKeepAlive does not.\n\nBut, there\u0027s a neater way to do this.\n\nfunc (ac *AuthClientService) dialer(target, timeout) (net.Conn, error) {\n  ac.invalidateToken()\n\n  c, err :\u003d net.DialTimeout(\"tcp\", target, timeout)\n  ...\n}\n\nfunc (ac *AuthClientService) invalidateToken() {\n  ac.mu.Lock()\n  ac.authToken \u003d \"\"\n  ac.lastTokenRefresh \u003d time.Time{}\n  ac.mu.Unlock()\n}\n\nthen use\n\ngrpc.WithDialer(ac.dialer)",
      "parentUuid": "cb55b2ad_c42ab386",
      "revId": "0f9b9e362c5369766542149d891f2e6ee881b46c",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cb55b2ad_3f34f092",
        "filename": "auth/grpcauth/client.go",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 5010
      },
      "writtenOn": "2016-09-14T21:40:47Z",
      "side": 1,
      "message": "Its certainly better, my brain was in neutral. Not sure we need the invalidateToken routine since the dialer will be the only thing calling it so I just did the work there.\n\nSetting lastTokenRefresh is not really helpful since this isn\u0027t refreshing the token, the NewAuthContext that eventually refreshes the token is the time needed and it does set it.\n\nThis also answers Eduardo\u0027s comment.",
      "parentUuid": "cbfa12f2_5c20fda8",
      "revId": "0f9b9e362c5369766542149d891f2e6ee881b46c",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cbfa12f2_3c4b7157",
        "filename": "auth/grpcauth/client.go",
        "patchSetId": 1
      },
      "lineNbr": 105,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-09-14T21:49:28Z",
      "side": 1,
      "message": "I like functions. It\u0027s got a nice name and makes it obvious what it does.\nI know it\u0027s not really helpful to set the refresh time, but since the token is invalid I thought it made sense to reset that field at the same time.",
      "parentUuid": "cb55b2ad_3f34f092",
      "revId": "0f9b9e362c5369766542149d891f2e6ee881b46c",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    }
  ]
}