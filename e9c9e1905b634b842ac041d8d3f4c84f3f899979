{
  "comments": [
    {
      "key": {
        "uuid": "a5f97da7_9c31c334",
        "filename": "cloud/storage/storagetest/memory.go",
        "patchSetId": 14
      },
      "lineNbr": 51,
      "author": {
        "id": 5305
      },
      "writtenOn": "2017-10-18T01:36:43Z",
      "side": 1,
      "message": "delete should return an error if ref does not exist.",
      "revId": "e9c9e1905b634b842ac041d8d3f4c84f3f899979",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2a582c0_08ef7c7d",
        "filename": "dir/server/serverlog/log.go",
        "patchSetId": 14
      },
      "lineNbr": 481,
      "author": {
        "id": 5305
      },
      "writtenOn": "2017-10-18T01:36:43Z",
      "side": 1,
      "message": "// TODO: Consider whether the reference should be encrypted.",
      "revId": "e9c9e1905b634b842ac041d8d3f4c84f3f899979",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "17b9fdc7_99f90ece",
        "filename": "dir/server/serverlog/log.go",
        "patchSetId": 14
      },
      "lineNbr": 481,
      "author": {
        "id": 5307
      },
      "writtenOn": "2017-10-18T01:44:21Z",
      "side": 1,
      "message": "My initial guess is no need to encrypt.  The contents should be encrypted with the DirServer key, and that key should be necessary and sufficient to work backwards from the backup roots.\n\nAlso, filenames in GCS are somewhat visible so if the name is enough to do harm we\u0027ve already lost.\n\n(But I haven\u0027t studied all this code and may misunderstand.)",
      "parentUuid": "e2a582c0_08ef7c7d",
      "revId": "e9c9e1905b634b842ac041d8d3f4c84f3f899979",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "645b2d4a_9f519f6a",
        "filename": "dir/server/serverlog/log.go",
        "patchSetId": 14
      },
      "lineNbr": 481,
      "author": {
        "id": 5389
      },
      "writtenOn": "2017-10-18T01:51:06Z",
      "side": 1,
      "message": "Eric, I was going to ask you about this.\n\nWith this change, anyone can ask my storeserver for the reference \"tree.root.nf@wh3rd.net\" and see my root direntry. The blocks are encrypted with the server\u0027s key, so they can\u0027t actually read any user data, but there is some information leakage: the root direntry contains the Time and Sequence fields.\n\nOne solution is to encrypt the marshalled entry before writing it to storage. Another is to use a reference name that is not predictable. The latter may hamper recovery, though. There are probably other solutions.\n\nFor me personally I don\u0027t care if people can see my root\u0027s Sequence and Time, but others might.\n\nWhat do you think?",
      "parentUuid": "17b9fdc7_99f90ece",
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "e9c9e1905b634b842ac041d8d3f4c84f3f899979",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    }
  ]
}