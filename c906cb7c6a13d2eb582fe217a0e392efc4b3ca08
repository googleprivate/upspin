{
  "comments": [
    {
      "key": {
        "uuid": "b0ff186b_1270ac49",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 12
      },
      "lineNbr": 15,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "needs sorting. fix your ide! ;)",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_27da2908",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 12
      },
      "lineNbr": 15,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_1270ac49",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_7275b839",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 12
      },
      "lineNbr": 356,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "delete",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_c729d5f8",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 12
      },
      "lineNbr": 356,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_7275b839",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_527a342b",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 12
      },
      "lineNbr": 358,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "watchers :\u003d append([]*watcher(nil), node.watchers...)",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_67f6e172",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 12
      },
      "lineNbr": 358,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_527a342b",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_b27e001c",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 12
      },
      "lineNbr": 813,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "these errors can never happen, so don\u0027t bother checking",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_e7097197",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 12
      },
      "lineNbr": 813,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_b27e001c",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_927bfc2b",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 45,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "the type declares that it is read only; no need to mention it",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_e750917d",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 45,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_927bfc2b",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_f288880a",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 60,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "unbuffered, i think\notherwise we can\u0027t distinguish between \"client has received the event\" and \"the event has sat in the channel buffer for a year\"",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_4743a5af",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 60,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Unbuffered works for now given we\u0027re in a goroutine. But it may not be the ideal solution in all cases. Let\u0027s go with that for now.\nDone.",
      "parentUuid": "b0ff186b_f288880a",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_d28584f0",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 73,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "more likely we\u0027ll have some tree-wide watch limit",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_a731394b",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 73,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_d28584f0",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_f2b6c8b9",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 79,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "this should be of buffer size 1.\nso if a server has work to do but it\u0027s not ready to receive from hasWork, it\u0027ll get the message eventually.",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_e7b6518c",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 79,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "I was afraid of having to stop the tree, but I guess 10 or 100 would have the same problem, just at the expense of more memory.\nDone.",
      "parentUuid": "b0ff186b_f2b6c8b9",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_f2eb68bf",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 79,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-16T01:17:58Z",
      "side": 1,
      "message": "Yeah, there\u0027s a school of thought that it\u0027s rarely useful to ever have a buffered channel of size \u003e1. I think this is one of those cases.",
      "parentUuid": "10ad446a_e7b6518c",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_b2a56088",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 134,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "Oh, I don\u0027t think we should be sending the state of the entire tree, just the particular directory entry being watched.",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_07b4cd81",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 134,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "It is for that particular subtree. I clarified the comment.",
      "parentUuid": "b0ff186b_b2a56088",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_32c5f04e",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 134,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-16T01:17:58Z",
      "side": 1,
      "message": "I know it is, but I don\u0027t think we should send every entry in the subtree either. It\u0027s impractical to send the entire state of a large subtree any time someone wants to start watching a tree.\n\nYou already get that, and more, with offset\u003d0, and offset\u003d-1 is the only other way to find the current offset. A call with offset\u003d-1 should not be so expensive.",
      "parentUuid": "10ad446a_07b4cd81",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_ede62767",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 134,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-16T03:24:28Z",
      "side": 1,
      "message": "This is the behavior Dave wants though. He wants to replicate and entire tree.\n\nAnd it\u0027s also consistent with the behavior of any order \u003e\u003d 0. We send everything that gets touched under a certain path. Why do something differently on -1 and then revert back to sending updates on everything under the path?\n\nPerhaps we could change order to mean: a negative number X means the current state of -X elements down the path. So, for -1, we would do what you suggest. -2 means path p plus its children, -3 their children also, -99 up to 98 levels down from p, and so on. Seems weird tho.\n\nThoughts?",
      "parentUuid": "b0ff186b_32c5f04e",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_728c9819",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 180,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "sendEvent ?",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_e7ddf1cd",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 180,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_728c9819",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_72c3f828",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 229,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "i\u0027d name the argument \u0027offset\u0027 like you have in many other places",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_a7d7f9a9",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 229,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_72c3f828",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_b2ac406c",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 264,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "shouldn\u0027t you be sending an error event and closing the channel in this case?",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_279229e7",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 264,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Maybe. The problem is knowing which errors not to send. If it\u0027s a timeout, we shouldn\u0027t send it, because it will only compound the problem. I created a sentinel error for that now.\n\nDone.",
      "parentUuid": "b0ff186b_b2ac406c",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_d2e8e4c5",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 264,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-16T01:17:58Z",
      "side": 1,
      "message": "The API specifically says that it sends timeout errors.\nI think we should always assume that the client will eventually catch up.",
      "parentUuid": "10ad446a_279229e7",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_6d41d755",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 264,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-16T03:24:28Z",
      "side": 1,
      "message": "This is also something Dave was very much against. I think it kind of makes little sense to send an error if you got a timeout on an unbuffered channel. Won\u0027t you get another error again and have to wait yet more time to send it?",
      "parentUuid": "b0ff186b_d2e8e4c5",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_92a93c5c",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 268,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "close the watcher channel",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_e7417176",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 268,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_92a93c5c",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_32e050b1",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 307,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "on reflection, the TODO is probably unnecessary.",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_a73b79fa",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 307,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_32e050b1",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_d2b3c4c7",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 316,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-15T03:11:41Z",
      "side": 1,
      "message": "Nothing bad happened. If the server isn\u0027t ready to receive from hasWork then  it\u0027s busy doing actual work. It\u0027ll get around to teh work eventually.",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_871afd96",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 316,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_d2b3c4c7",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_e708914c",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 12
      },
      "lineNbr": 316,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-15T16:45:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_d2b3c4c7",
      "revId": "c906cb7c6a13d2eb582fe217a0e392efc4b3ca08",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    }
  ]
}