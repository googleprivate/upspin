{
  "comments": [
    {
      "key": {
        "uuid": "6d241f48_1ff2c75f",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 5
      },
      "lineNbr": 239,
      "author": {
        "id": 5305
      },
      "writtenOn": "2017-07-02T23:51:10Z",
      "side": 1,
      "message": "why is err being dropped? in fact, why not just drop this clause altogether?",
      "revId": "97a8b543df20924bc9dd32932216c0c267d6d18b",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14aa14f1_5c4bd617",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 5
      },
      "lineNbr": 267,
      "author": {
        "id": 5308
      },
      "writtenOn": "2017-07-02T16:38:53Z",
      "side": 1,
      "message": "The lack of a log for this is somewhat intentional because PutDir is a different operation than Put. See comment on line 277 below. \n\nThe purpose of the log is two-fold:\n1) so we can re-create this operation if the tree is lost before a flush\n2) for Watch to find the tail.\n\nThis gives the Watch what it needs (#2 above) but not 1. \n\nBy adding this to the log, there\u0027s a very small window of time where you haven\u0027t yet flushed but this is on the log. Hence, if the tree crashes, the recoverFromLog code will attempt to re-apply this Put operation by calling the regular Put. However, it\u0027s not clear to me yet whether it will succeed, since PutDir bypasses some checks that Put does. Hence why I put a comment on line 277 saying we may want to instead add a LogEntry code for PutDir.",
      "revId": "97a8b543df20924bc9dd32932216c0c267d6d18b",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c60e29cb_1d553ad7",
        "filename": "dir/server/tree/tree.go",
        "patchSetId": 5
      },
      "lineNbr": 267,
      "author": {
        "id": 5389
      },
      "writtenOn": "2017-07-02T21:13:31Z",
      "side": 1,
      "message": "Makes sense. In the interest of forward progress, how about I move the log.Append after the flush in this CL, and we can add the new log operation in a future CL? (ie, fix the todo)",
      "parentUuid": "14aa14f1_5c4bd617",
      "revId": "97a8b543df20924bc9dd32932216c0c267d6d18b",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    }
  ]
}