{
  "comments": [
    {
      "key": {
        "uuid": "d10ccde6_89144d79",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 5308
      },
      "writtenOn": "2017-03-26T00:20:43Z",
      "side": 1,
      "message": "invalidate",
      "revId": "ed025a8a7334bc80de156ed31640d0d23ddb1ecc",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2dd4b0ca_f8109e01",
        "filename": "key/server/server.go",
        "patchSetId": 2
      },
      "lineNbr": 208,
      "author": {
        "id": 5308
      },
      "writtenOn": "2017-03-26T00:20:43Z",
      "side": 1,
      "message": "Why would the user be put on error?",
      "revId": "ed025a8a7334bc80de156ed31640d0d23ddb1ecc",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b6834192_0c987df9",
        "filename": "key/server/server.go",
        "patchSetId": 2
      },
      "lineNbr": 208,
      "author": {
        "id": 5660
      },
      "writtenOn": "2017-03-26T00:25:29Z",
      "side": 1,
      "message": "For example, this case:\n\n1. client puts to storage server\n2. storage server stores the data SUCCESSFULLY\n3. storage sends back the response to client\n4. connection fails between client and server\n5. client receives error on timeout\n\nNow, we receives an error but the PUT succeeded on the storage side already. We have an inconsistent state between cache and storage.",
      "parentUuid": "2dd4b0ca_f8109e01",
      "revId": "ed025a8a7334bc80de156ed31640d0d23ddb1ecc",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "47a70a82_14c8d799",
        "filename": "key/server/server.go",
        "patchSetId": 2
      },
      "lineNbr": 208,
      "author": {
        "id": 5660
      },
      "writtenOn": "2017-03-26T00:28:35Z",
      "side": 1,
      "message": "In most of the network storage system, I believe \"error\" means \"not sure\", and \"ok\" means \"stored\".",
      "parentUuid": "b6834192_0c987df9",
      "revId": "ed025a8a7334bc80de156ed31640d0d23ddb1ecc",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eae62138_778feaa1",
        "filename": "key/server/server.go",
        "patchSetId": 2
      },
      "lineNbr": 208,
      "author": {
        "id": 5308
      },
      "writtenOn": "2017-03-26T00:39:46Z",
      "side": 1,
      "message": "I\u0027m not sure I want to second-guess what the storage layer is telling me. Perhaps there\u0027s a specific error we want to consider as \"don\u0027t know\"?Also , this raises a question: should we update the positive cache as well, if there is an updated user in the backend?\n\nPerhaps the thing to do is remove the user from both caches if we suspect an error *after* successful storage.",
      "parentUuid": "47a70a82_14c8d799",
      "revId": "ed025a8a7334bc80de156ed31640d0d23ddb1ecc",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c8b2b942_dbf23fe5",
        "filename": "key/server/server.go",
        "patchSetId": 2
      },
      "lineNbr": 208,
      "author": {
        "id": 5309
      },
      "writtenOn": "2017-03-26T02:39:36Z",
      "side": 1,
      "message": "A network fart can cause an error on the reply. In general I would not cache anything, positive or negative, on an error.",
      "parentUuid": "eae62138_778feaa1",
      "revId": "ed025a8a7334bc80de156ed31640d0d23ddb1ecc",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6bcd61da_b6719a20",
        "filename": "key/server/server.go",
        "patchSetId": 2
      },
      "lineNbr": 213,
      "author": {
        "id": 5308
      },
      "writtenOn": "2017-03-26T00:39:46Z",
      "side": 1,
      "message": "Since this comment has no surrounding context anymore, I\u0027d just drop it or write something like:\n\n// Ensure user cache is up-to-date.",
      "revId": "ed025a8a7334bc80de156ed31640d0d23ddb1ecc",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": true
    }
  ]
}