{
  "comments": [
    {
      "key": {
        "uuid": "ab888773_bdc78a32",
        "filename": "upspin/upspin.go",
        "patchSetId": 2
      },
      "lineNbr": 400,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-10T04:35:45Z",
      "side": 1,
      "message": "In my mind -1 means: \"if anything changes from now on\". But not the current entry. If you really need it now, Lookup is the right API. \n\nWatching a directory means you get all entries that get changed for paths under \"name\". So, if you\u0027re watching a directory and order\u003d-1, \"current entry\" would not mean the DirEntry for the directory, but it and all its descendent DirEntries.\n\nMaybe:\n// If order is -1, all future changes will be sent.",
      "revId": "80592447c3b7d1e1e1f8cfcdfd0200ebc3156608",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ebf7df07_3b053779",
        "filename": "upspin/upspin.go",
        "patchSetId": 2
      },
      "lineNbr": 400,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-10T04:51:08Z",
      "side": 1,
      "message": "If we adopted you suggestion, how would I get the current state of the file and any future updates without missing anything?",
      "parentUuid": "ab888773_bdc78a32",
      "revId": "80592447c3b7d1e1e1f8cfcdfd0200ebc3156608",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab888773_3d539a2b",
        "filename": "upspin/upspin.go",
        "patchSetId": 2
      },
      "lineNbr": 400,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-10T06:02:44Z",
      "side": 1,
      "message": "three options:\n1) The client needs to have memory and remember the last update it got. Then start from that update and catch up.\n2) Ask for 0 (all that the server has)\n3) Do a Lookup and then Watch(-1).",
      "parentUuid": "ebf7df07_3b053779",
      "revId": "80592447c3b7d1e1e1f8cfcdfd0200ebc3156608",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ebf7df07_7b085f06",
        "filename": "upspin/upspin.go",
        "patchSetId": 2
      },
      "lineNbr": 400,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-10T22:23:04Z",
      "side": 1,
      "message": "Think of a storeserver that wants to watch a permissions file. It wants the current state of the StoreWriters file, and any future changes. I think this will be a common use case, and it\u0027s at least the one we have now.\n\n1. That assumes they\u0027re already watching. Not an option.\n2. Inefficient if the caller does not care what happened before now.\n3. There\u0027s a race condition here, if changes happen between the Lookup and the Watch.\n\nI think the API as specified here is the easiest one to use correctly and efficiently.",
      "parentUuid": "ab888773_3d539a2b",
      "revId": "80592447c3b7d1e1e1f8cfcdfd0200ebc3156608",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    }
  ]
}