{
  "comments": [
    {
      "key": {
        "uuid": "b0ff186b_35903a9f",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 207,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-16T21:56:08Z",
      "side": 1,
      "message": "instead of this, return a sentinel value errClose",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_4fc08536",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 207,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-16T22:19:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_35903a9f",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_1595368f",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 213,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-16T21:56:08Z",
      "side": 1,
      "message": "delete this",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_2fc3c945",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 213,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-16T22:19:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_1595368f",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_b5838a55",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 268,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-16T21:56:08Z",
      "side": 1,
      "message": "If you make *only* this loop and sendCurrentAndWatch, responsible for sending errors and closing w.events, then you don\u0027t need the atomic guard, and you can be sure you\u0027re never sending to w.events after it is closed.",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_92aa264d",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 268,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-16T22:19:48Z",
      "side": 1,
      "message": "The atomic is not for guarding that we\u0027re not closing it twice. Double closes don\u0027t happen in this new version. The atomic is so that the Tree (in tree.go) can call removeDeadWatchers and not have a race on checking a nil pointer. \n\nIn other words, I need a way to know the watcher can be deleted. It can be a \"lastError\" field or a boolean, etc but that will require a lock or an atomic operation.",
      "parentUuid": "b0ff186b_b5838a55",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_758ac26e",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 272,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-16T21:56:08Z",
      "side": 1,
      "message": "if err \u003d\u003d errClose || err \u003d\u003d errTimeout {\n  close(w.events)\n  return\n}",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_f2e03ab3",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 272,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-16T22:19:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b0ff186b_758ac26e",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0ff186b_558fbe7c",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 284,
      "author": {
        "id": 5020
      },
      "writtenOn": "2016-11-16T21:56:08Z",
      "side": 1,
      "message": "close(w.events)",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10ad446a_1215d6b6",
        "filename": "dir/server/tree/watch.go",
        "patchSetId": 18
      },
      "lineNbr": 284,
      "author": {
        "id": 5015
      },
      "writtenOn": "2016-11-16T22:19:48Z",
      "side": 1,
      "message": "I need the latch. See above.",
      "parentUuid": "b0ff186b_558fbe7c",
      "revId": "91446d46579b46c52b1533fc34bf731817c71550",
      "serverId": "0759ed4b-3fdc-34dc-866b-f2e708168c03",
      "unresolved": false
    }
  ]
}